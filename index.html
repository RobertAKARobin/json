<!DOCTYPE html>
<html>
	<head>
		<!-- Hosted on GH Pages -->
		<!-- https://github.com/robertakarobin/json -->
		<title>JSON Formatter</title>
		<style>
* {
	margin: 0;
	padding: 0;
	border: 0;
	font-size: inherit;
	font-weight: inherit;
	font-family: inherit;
	font-style: inherit;
	text-decoration: inherit;
	line-height: inherit;
	color: inherit;
}
*:focus{
	outline:none;
}
html, body{
	position:relative;
	font-family:monospace;
}
body{
	display:flex;
	width:100%;
	height:100vh;
}
body > div{
	flex-grow:1;
	flex-basis:50%;

	display:flex;
	flex-direction:column;
}
textarea, input, button{
	padding:5px;
}
input, button{
	line-height:2em;
}
button{
	cursor:pointer;
	background-color:#ccc;
}
button:hover{
	background-color:#aaa;
}
textarea{
	resize:none;
	flex-grow:1;
}
textarea[disabled]{
	background-color:#eee;
}
		</style>
		<script>
window.addEventListener('DOMContentLoaded', function(){
	var el = {
		input: document.getElementById('input'),
		output: document.getElementById('output'),
		indent: document.getElementById('indent'),
		direction: document.getElementById('direction'),
		wrap: document.getElementById('wrap')
	}
	var query = (function(){
		var queryString = window.location.search.replace(/^\?/, '').split('&')
		var output = {}
		queryString.forEach(function(query){
			var prop = query.split('=')[0]
			var val = query.split('=')[1]
			output[prop] = val
		})
		return output;
	})();
	var updateJSON = function(){
		var textIn = el.input.value;
		var indentLevel = parseInt(el.indent.value);
		var textOut;
		if(!(textIn.trim())){
			textOut = '';
		}else{
			try{
				textOut = JSON.stringify(JSON.parse(textIn), null, (indentLevel || '\t'));
			}catch(e){
				textOut = 'Bad JSON. :(';
			}
		}
		el.output.value = textOut;
	}
	var rotate = function(){
		var current = el.wrap.style.flexDirection;
		var updated;
		if(current == 'column'){
			updated = 'row';
		}else{
			updated = 'column';
		}
		el.wrap.style.flexDirection = updated;
	}

	if(query.indent){
		el.indent.value = query.indent;
	}
	if(query.direction){
		el.wrap.style.flexDirection = query.direction;
	}
	el.input.addEventListener('input', updateJSON);
	el.indent.addEventListener('input', updateJSON);
	el.direction.addEventListener('click', rotate);
});
		</script>
	</head>
	<body id="wrap" style="flex-direction:row;">
		<div>
			<input type="text" id="indent" placeholder="indent" value="2" />
			<button id="direction">Change direction</button>
			<textarea id="input" placeholder="JSON here" spellcheck="false"></textarea>
		</div>
		<div>
			<textarea id="output" disabled placeholder="Formatted JSON will go here"></textarea>
		</div>
	</body>
</html>
