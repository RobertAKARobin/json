<!DOCTYPE html>
<html>
	<head>
		<title>JSON Formatter</title>
		<style>
* {
	margin: 0;
	padding: 0;
	border: 0;
	font-size: inherit;
	font-weight: inherit;
	font-family: inherit;
	font-style: inherit;
	text-decoration: inherit;
	line-height: inherit;
	color: inherit;
}
*:focus{
	outline:none;
}
html, body{
	position:relative;
	font-family:monospace;
}
body{
	display:flex;
	flex-direction:row;
	width:100%;
	height:100vh;
}
body > div{
	flex-grow:1;

	display:flex;
	flex-direction:column;
}
textarea, input{
	padding:5px;
}
input{
	border-bottom:1px solid #aaa;
}
textarea{
	resize:none;
	flex-grow:1;
}
textarea[disabled]{
	background-color:#eee;
}
		</style>
		<script>
window.addEventListener('DOMContentLoaded', function(){
	var el = {
		input: document.getElementById('input'),
		output: document.getElementById('output'),
		indent: document.getElementById('indent')
	}
	var windowIndentLevel = (function(){
		var queryString = window.location.search.replace(/^\?/, '').split('&')
		var queryHash = {}
		queryString.forEach(function(query){
			var prop = query.split('=')[0]
			var val = query.split('=')[1]
			queryHash[prop] = val
		})
		return queryHash['indent'];
	})();
	var updateJSON = function(){
		var textIn = el.input.value;
		var indentLevel = parseInt(el.indent.value);
		var textOut;
		if(!textIn){
			return;
		}
		try{
			textOut = JSON.stringify(JSON.parse(textIn), null, (indentLevel || '\t'));
		}catch(e){
			textOut = 'Bad JSON. :(';
		}
		el.output.value = textOut;
	}

	if(windowIndentLevel){
		el.indent.value = windowIndentLevel;
	}
	el.input.addEventListener('input', updateJSON);
	el.indent.addEventListener('input', updateJSON);
});
		</script>
	</head>
	<body>
		<div>
			<input type="text" id="indent" placeholder="Indentation here" value="2" />
			<textarea id="input" placeholder="JSON here" spellcheck="false"></textarea>
		</div>
		<div>
			<textarea id="output" disabled placeholder="Formatted JSON will go here"></textarea>
		</div>
	</body>
</html>
