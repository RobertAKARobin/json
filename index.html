<!DOCTYPE html>
<html>
	<head>
		<!-- Hosted on GH Pages -->
		<!-- https://github.com/robertakarobin/json -->
		<title>JSON Formatter</title>
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<style>
* {
	margin: 0;
	padding: 0;
	border: 0;
	font-size: inherit;
	font-weight: inherit;
	font-family: inherit;
	font-style: inherit;
	text-decoration: inherit;
	line-height: inherit;
	color: inherit;
	background-color:transparent;
}
*:focus{
	outline:none;
}
html, body{
	position:relative;
	font-family:monospace;
	font-size:14px;
}
div{
	position:relative;
}
.wrap{
	display:flex;
	width:100%;
	height:100vh;
	flex-direction:column;
}
.wrap > *{
	flex-grow:0;
}
.wrap > #output{
	flex-grow:1;
}
label{
	display:flex;
	flex-direction:row;
	border-bottom:1px solid #ccc;
	background-color:#f0f0f0;
	cursor:pointer;
}
label > span{
	border-right:1px solid #ddd;
}
label > *,
input, textarea{
	padding:5px 10px;
}
label > *{
	line-height:20px;
	height:20px;
}
label > input,
label > textarea{
	flex-grow:1;
	background:linear-gradient(80deg, rgba(0,0,0,0.3), rgba(0,0,0,0.05) 10px, rgba(0,0,0,0.03) 40px);
}
		</style>
		<script>
window.addEventListener('DOMContentLoaded', function(){
	var el = {
		input: document.getElementById('input'),
		output: document.getElementById('output'),
		indent: document.getElementById('indent'),
		wrap: document.getElementById('wrap')
	}
	var query = (function(){
		var queryString = window.location.search.replace(/^\?/, '').split('&')
		var output = {}
		queryString.forEach(function(query){
			var prop = query.split('=')[0]
			var val = query.split('=')[1]
			output[prop] = val
		})
		return output;
	})();
	var updateJSON = function(){
		var textIn = el.input.value;
		var indentLevel = parseInt(el.indent.value);
		var textOut;
		if(!(textIn.trim())){
			textOut = '';
		}else{
			try{
				textOut = JSON.stringify(JSON.parse(textIn), null, (indentLevel || '\t'));
			}catch(e){
				textOut = 'Bad JSON. :(';
			}
		}
		el.output.value = textOut;
	}

	if(query.indent){
		el.indent.value = query.indent;
	}
	el.input.addEventListener('input', updateJSON);
	el.indent.addEventListener('input', updateJSON);
});
		</script>
	</head>
	<body>
		<div class="wrap">
			<label>
				<span>Indentation:</span>
				<input type="text" id="indent" placeholder="A number, or \t for tabs" value="2" spellcheck="false" />
			</label>
			<label>
				<span>Ugly JSON goes here:</span>
				<textarea id="input" spellcheck="false" placeholder='{"foo": "bar"}'></textarea>
			</label>
			<textarea id="output" disabled placeholder="...and pretty JSON comes out here!"></textarea>
		</div>
	</body>
</html>
